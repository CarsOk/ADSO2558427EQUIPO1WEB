<!DOCTYPE html>
<html lang="en" >
<head>
	<meta charset="utf-8" />
	<title>CURB PEDIDOS</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" name="viewport" />

	
<%= stylesheet_link_tag    'shops', media: 'all', 'data-turbolinks-track': 'reload' %>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<%= stylesheet_link_tag "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" %>
<%= javascript_include_tag 'https://code.jquery.com/jquery-3.6.0.min.js' %>

</head>
<body class='pace-top'>
	<div id="app" class="app app-content-full-height app-without-sidebar app-without-header bg-white">
		<!-- BEGIN #content -->
		<div id="content" class="app-content p-0">
			<!-- BEGIN pos -->
			<div class="pos pos-customer" id="pos-customer">
				<!-- BEGIN pos-menu -->
				<div class="pos-menu">
					<div class="logo">
              <a href="<%= shops_path %>">
                <%= image_tag('LogoCurb.png', alt: 'LogoCurb', class: 'imagen-pequena') %>
              </a>
					</div>
					<div class="nav-container">
						<div data-scrollbar="true" data-height="100%" data-skip-mobile="true">
							<ul class="nav nav-tabs">
								<li class="nav-item">
									<a class="nav-link active" href="#" data-filter="all">
										<i class="fa fa-fw fa-utensils me-1 ms-n2"></i> Todos
									</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" href="#" data-filter="perros calientes">
										<i class="fa fa-fw fa-hotdog me-1 ms-n2"></i> Perro caliente
									</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" href="#" data-filter="salchipapas">
										<i class="fa fa-fw fa-drumstick-bite me-1 ms-n2"></i> Salchipapa
									</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" href="#" data-filter="hamburguesas">
										<i class="fa fa-fw fa-hamburger me-1 ms-n2"></i> Hamburguesa
									</a>
								</li>
								<li class="nav-item">
									<a class="nav-link" href="#" data-filter="asados">
										<i class="fa fa-fw fa-fire me-1 ms-n2"></i> Asados
									</a>
								</li>

								<li class="nav-item">
									<a class="nav-link" href="#" data-filter="bebidas">
										<i class="fa fa-fw fa-cocktail  me-1 ms-n2"></i> Bebidas
									</a>
								</li>
							</ul>
						</div>
					</div>
				</div>

				<div class="pos-content">
					<div class="pos-content-container" data-scrollbar="true" data-height="100%" data-skip-mobile="true">
						<div class="product-row">
							<% @products.each do |product| %>
								<% if product.available %>
									<div class="product-container" data-type="<%= product.category %>">
										<div class="product" data-bs-toggle="modal" data-bs-target="#modalPosItem">
										<div class="img" style="background-image: url(<%= asset_path(product.image) %>)"></div>
										<div class="text">
										<div class="title"><%= product.title %></div>
										<div class="desc"><%= product.description %></div>
										<div class="price"><%= number_to_currency(product.price) %></div>
										<%= form_for @order_item, remote: true do |f| %>
											<%= f.hidden_field :product_id, value: product.id %>
											<div class="input-group">
												<%= f.number_field :quantity, value: 1, min: 1, class: 'form-control col-md-3' %>
												<div class="input-group-append">
												<%= f.button type: "submit", class: "btn btn-success" do %>
													<i class="fa fa-plus"></i> 
												<% end %>
												</div>
											</div>
										<% end %>
										</div>
										</div>
									</div>
								<% end %>
							<% end %>
						</div>
					</div>
				</div>


				<div class="pos-sidebar" id="pos-sidebar">
					<div class="pos-sidebar-header">
						<div class="back-btn">
							<button type="button" data-dismiss-class="pos-mobile-sidebar-toggled" data-target="#pos-customer" class="btn">
								<svg viewBox="0 0 16 16" class="bi bi-chevron-left" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
									<path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0z"/>
								</svg>
							</button>
						</div>
						<%= image_tag "icon-table.svg", class: "icon", width: 20 %>
						<div class="title">Table 01</div>
						<div class="order">Order: <b>#0056</b></div>
					</div>
					<div class="pos-sidebar-nav">
						<ul class="nav nav-tabs nav-fill">
							<li class="nav-item">
								<a class="nav-link active" href="#" data-bs-toggle="tab" data-bs-target="#newOrderTab">Nueva Orden (<%="#{current_order.order_items.size}"%>)</a>
							</li>
							<li class="nav-item">
								<a class="nav-link" href="#" data-bs-toggle="tab" data-bs-target="#orderHistoryTab">Order History (0)</a>
							</li>
						</ul>
					</div>
					<div class="pos-sidebar-body tab-content" data-scrollbar="true" data-height="100%">
						<div class="tab-pane fade h-100 show active" id="newOrderTab">
							<div id="card-item">
							<% @order_items.each do |item|%>
								<div class="pos-table">
									<div class="row pos-table-row">
										<div class="col-9">
										<div class="pos-product-thumb">
											<div class="img" style="background-image: url(<%= asset_path(item.product.image) %>)"></div>
											<div class="info">
											<div class="title"><%= item.product.title %></div>
											<div class="single-price">$<%= item.product.price %></div>
											<div class="input-group">
												<%= form_for item, remote: true do |f|%>
													<%= f.hidden_field :product_id, :value => item.product.id %>
													<%= f.number_field :quantity, :value => item.quantity.to_i, class: "col-md-4 quantity" %>
        											<%= f.button type: "submit", class: "btn btn-success btn-sm" do %>
														<i class="fa fa-refresh"></i> 
													<% end %>
													<%= link_to order_item_path(item), method: :delete, remote: true, class: "btn btn-danger btn-sm" do %>
														<i class="fa fa-trash"></i>
													<% end %>
												<% end %>
											</div>
											</div>
										</div>
										</div>
										<div class="col-3 total-price">$<%= item.total %></div>
									</div>
								</div>
							<%end%>
							</div>
						</div>
						<div class="tab-pane fade h-100" id="orderHistoryTab">
							<div class="h-100 d-flex align-items-center justify-content-center text-center p-20">
								<div>
									<div class="mb-3 mt-n5">
										<svg width="6em" height="6em" viewBox="0 0 16 16" class="text-gray-300" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
											<path fill-rule="evenodd" d="M14 5H2v9a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5zM1 4v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4H1z"/>
											<path d="M8 1.5A2.5 2.5 0 0 0 5.5 4h-1a3.5 3.5 0 1 1 7 0h-1A2.5 2.5 0 0 0 8 1.5z"/>
										</svg>
									</div>
									<h4>No order history found</h4>
								</div>
							</div>
						</div>
					</div>
					<div class="pos-sidebar-footer">
						<div class="subtotal">
							<div class="text">Subtotal</div>
							<div class="price">$<%= current_order.subtotal %></div>
						</div>
						<div class="taxes">
							<div class="text">Impuesto (0%)</div>
							<div class="price">$0</div>
						</div>
						<div class="total">
							<div class="text">Total</div>
							<div class="price">$<%= current_order.subtotal %></div>
						</div>
						<div class="btn-row">
							<a href="#" class="btn btn-default"><i class="fa fa-bell fa-fw fa-lg"></i> Service</a>
							<a href="#" class="btn btn-default"><i class="fa fa-file-invoice-dollar fa-fw fa-lg"></i> Bill</a>
							<a href="#" class="btn btn-success"><i class="fa fa-check fa-fw fa-lg"></i> Submit Order</a>
						</div>
					</div>
				</div>
			</div>

			<a href="#" class="pos-mobile-sidebar-toggler" data-toggle-class="pos-mobile-sidebar-toggled" data-target="#pos-customer">
				<svg viewBox="0 0 16 16" class="img" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
					<path fill-rule="evenodd" d="M14 5H2v9a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5zM1 4v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4H1z"/>
					<path d="M8 1.5A2.5 2.5 0 0 0 5.5 4h-1a3.5 3.5 0 1 1 7 0h-1A2.5 2.5 0 0 0 8 1.5z"/>
				</svg>
				<span class="badge">5</span>
			</a>
		</div>


			<a href="#" class="pos-mobile-sidebar-toggler" data-toggle-class="pos-mobile-sidebar-toggled" data-target="#pos-customer">
				<svg viewBox="0 0 16 16" class="img" fill="currentColor" xmlns="http://www.w3.org/2000/svg">
					<path fill-rule="evenodd" d="M14 5H2v9a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V5zM1 4v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V4H1z"/>
					<path d="M8 1.5A2.5 2.5 0 0 0 5.5 4h-1a3.5 3.5 0 1 1 7 0h-1A2.5 2.5 0 0 0 8 1.5z"/>
				</svg>
				<span class="badge">5</span>
			</a>

		</div>


	<script>

		$(document).ready(function() {
			var handleFilter = function() {
			  "use strict";
	  
			  $(document).on('click', '.pos-menu [data-filter]', function(e) {
				e.preventDefault();
	  
				var targetType = $(this).attr('data-filter');
	  
				$(this).addClass('active');
				$('.pos-menu [data-filter]').not(this).removeClass('active');
				if (targetType == 'all') {
				  $('.pos-content [data-type]').removeClass('d-none');
				} else {
				  $('.pos-content [data-type="'+ targetType +'"]').removeClass('d-none');
				  $('.pos-content [data-type]').not('.pos-content [data-type="'+ targetType +'"]').addClass('d-none');
				}
			  });
			};
	  
			handleFilter();
		  });

		  var reloadButton = document.getElementById("reloadButton");

			reloadButton.addEventListener("click", function() {
				location.reload();
			});
   </script>
</body>
</html>
